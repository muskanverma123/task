
import Task from '../model/Task.js'
import  nodemailer from "nodemailer"  
//create task
export const createTask = async(req,res)=>{
    try{

        const transporter = nodemailer.createTransport({
            service: 'gmail',
            auth: {
              user: "muskanverma99765@gmail.com",
              pass: "ajdf ghkh lvpu aqah",
            },
        })
        
        const Email = req.body.Email
        const text = req.body.text
        const mailOptions = {
            from: 'muskanverma99765@gmail.com',
            to: Email,
            subject: 'Sending Email using Node.js',
            text: text
          };
          transporter.sendMail(mailOptions, function(error, info){
            if (error) {
              console.log(error);
            } else {
              console.log('Email sent: ' + info.response);
            }
          });


        const createTask = new Task({
            Title:req.body.Title,
            Description:req.body.Description,
            DueDate:req.body.DueDate,
            Status:req.body.Status,
            Priority:req.body.Priority,
            Projects:req.body.Projects
        })
        const saveTask = await createTask.save()
        return res.status(200).json({
            status:201,
            message:"create task successfully",
            data:saveTask
        })

    }catch(error){
        console.log(error)
        return res.status(500).json({
            status:500,
            message:"Internal server error",
            data:[]
        })
    }
}
